!function($,t){"object"==typeof exports&&"undefined"!=typeof module?(t.Tiny=t,module.exports=t):"function"==typeof define&&define.amd?define("JZZ.synth.Tiny",["JZZ"],t):t(JZZ)}(this,function($){if($&&($.synth||($.synth={}),!$.synth.Tiny)){var t,s="1.3.6",e={},_=[],i={};i._info=function($){return $||($="JZZ.synth.Tiny"),{type:"Web Audio",name:$,manufacturer:"virtual",version:s}},i._openOut=function($,s){var v;if(r(),!t){$._crash("AudioContext not supported");return}void 0!==s?(e[s=""+s]||(e[s]=new n),v=e[s]):(v=new n,_.push(v)),v.setAudioContext(t),$.plug=function($){$&&($.context instanceof AudioContext||$.context instanceof webkitAudioContext)&&v.setAudioContext($.context,$)},$.setSynth=function($,t,s){v.setTimbre(!!s,$,a(t))},$.getSynth=function($,t){return t?a(v.drummap[$-35]):a(v.program[$])},$._info=i._info(s),$._receive=function($){v.send($)},$._resume()},$.synth.Tiny=function(t){return $.lib.openMidiOut(t,i)},$.synth.Tiny.register=function(t){return!!r()&&$.lib.registerMidiOut(t,i)},$.synth.Tiny.version=function(){return s}}function n($){for(var t in this.__proto__=this.sy={is:"webaudio-tinysynth",properties:{masterVol:{type:Number,value:.5,observer:"setMasterVol"},reverbLev:{type:Number,value:.3,observer:"setReverbLev"},quality:{type:Number,value:1,observer:"setQuality"},debug:{type:Number,value:0},src:{type:String,value:null,observer:"loadMIDIUrl"},loop:{type:Number,value:0},tsmode:{type:Number,value:0},voices:{type:Number,value:64},useReverb:{type:Number,value:1}},program:[],drummap:[],program1:[[{w:"sine",v:.4,d:.7,r:.1},{w:"triangle",v:3,d:.7,s:.1,g:1,a:.01,k:-1.2}],[{w:"triangle",v:.4,d:.7,r:.1},{w:"triangle",v:4,t:3,d:.4,s:.1,g:1,k:-1,a:.01}],[{w:"sine",d:.7,r:.1},{w:"triangle",v:4,f:2,d:.5,s:.5,g:1,k:-1}],[{w:"sine",d:.7,v:.2},{w:"triangle",v:4,t:3,f:2,d:.3,g:1,k:-1,a:.01,s:.5}],[{w:"sine",v:.35,d:.7},{w:"sine",v:3,t:7,f:1,d:1,s:1,g:1,k:-.7}],[{w:"sine",v:.35,d:.7},{w:"sine",v:8,t:7,f:1,d:.5,s:1,g:1,k:-.7}],[{w:"sawtooth",v:.34,d:2},{w:"sine",v:8,f:.1,d:2,s:1,r:2,g:1}],[{w:"triangle",v:.34,d:1.5},{w:"square",v:6,f:.1,d:1.5,s:.5,r:2,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:11,t:6,d:.2,s:.4,g:1}],[{w:"sine",v:.2,d:.3,r:.3},{w:"sine",v:11,t:5,d:.1,s:.4,g:1}],[{w:"sine",v:.2,d:.6,r:.6},{w:"triangle",v:11,t:5,f:1,s:.5,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:6,t:5,d:.02,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",v:.2,d:1,r:1},{w:"sine",v:11,t:3.5,d:1,r:1,g:1}],[{w:"triangle",v:.2,d:.5,r:.2},{w:"sine",v:6,t:2.5,d:.2,s:.1,r:.2,g:1}],[{w:"w9999",v:.22,s:.9},{w:"w9999",v:.22,t:2,f:2,s:.9}],[{w:"w9999",v:.2,s:1},{w:"sine",v:11,t:6,f:2,s:.1,g:1,h:.006,r:.002,d:.002},{w:"w9999",v:.2,t:2,f:1,h:0,s:1}],[{w:"w9999",v:.2,d:.1,s:.9},{w:"w9999",v:.25,t:4,f:2,s:.5}],[{w:"w9999",v:.3,a:.04,s:.9},{w:"w9999",v:.2,t:8,f:2,a:.04,s:.9}],[{w:"sine",v:.2,a:.02,d:.05,s:1},{w:"sine",v:6,t:3,f:1,a:.02,d:.05,s:1,g:1}],[{w:"triangle",v:.2,a:.02,d:.05,s:.8},{w:"square",v:7,t:3,f:1,d:.05,s:1.5,g:1}],[{w:"square",v:.2,a:.02,d:.2,s:.5},{w:"square",v:1,d:.03,s:2,g:1}],[{w:"square",v:.2,a:.02,d:.1,s:.8},{w:"square",v:1,a:.3,d:.1,s:2,g:1}],[{w:"sine",v:.3,d:.5,f:1},{w:"triangle",v:5,t:3,f:-1,d:1,s:.1,g:1}],[{w:"sine",v:.4,d:.6,f:1},{w:"triangle",v:12,t:3,d:.6,s:.1,g:1,f:-1}],[{w:"triangle",v:.3,d:1,f:1},{w:"triangle",v:6,f:-1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.3,d:1,f:-1},{w:"triangle",v:11,f:1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.4,d:.1,r:.01},{w:"sine",v:7,g:1}],[{w:"triangle",v:.4,d:1,f:1},{w:"square",v:4,f:-1,d:1,s:.7,g:1}],[{w:"triangle",v:.35,d:1,f:1},{w:"square",v:7,f:-1,d:.3,s:.5,g:1}],[{w:"sine",v:.2,t:1.5,a:.005,h:.2,d:.6},{w:"sine",v:11,t:5,f:2,d:1,s:.5,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"w9999",d:.3,v:.7,s:.5},{w:"sawtooth",v:1.2,d:.02,s:.5,g:1,h:0,r:.02}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sine",v:.4,a:.1,d:11},{w:"sine",v:6,f:2.5,d:.05,s:1.1,g:1}],[{w:"sine",v:.3,d:.1,r:.1},{w:"square",v:4,t:3,d:1,s:.2,g:1}],[{w:"sine",v:.3,d:.5,r:.5},{w:"sine",v:7,t:2,f:2,d:1,r:1,g:1}],[{w:"triangle",v:.6,h:.03,d:.3,r:.3,t:.5},{w:"n0",v:8,t:1.5,d:.08,r:.08,g:1}],[{w:"sawtooth",v:.3,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.3,f:-2,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,t:2,f:2,a:1,d:1,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,f:2,a:.02,d:1,s:1}],[{w:"triangle",v:.3,a:.03,s:1},{w:"sine",v:3,t:5,f:1,d:1,s:1,g:1}],[{w:"sine",v:.4,a:.03,s:.9},{w:"sine",v:1,t:2,f:3,d:.03,s:.2,g:1}],[{w:"triangle",v:.6,a:.05,s:.5},{w:"sine",v:1,f:.8,d:.2,s:.2,g:1}],[{w:"square",v:.15,a:.01,d:.2,r:.2,t:.5,h:.03},{w:"square",v:4,f:.5,d:.2,r:11,a:.01,g:1,h:.02},{w:"square",v:.15,t:4,f:1,a:.02,d:.15,r:.15,h:.03},{g:3,w:"square",v:4,f:-.5,a:.01,h:.02,d:.15,r:11}],[{w:"square",v:.2,a:.01,d:1,s:.6,r:.04},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.04,d:1,s:.4,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.15,a:.04,s:1},{w:"sine",v:2,d:.1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6,r:.08},{w:"sine",v:1,f:.2,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:.5,s:.7,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"sine",v:.4,a:.02,d:.7,s:.5},{w:"square",v:5,t:2,d:.2,s:.5,g:1}],[{w:"sine",v:.3,a:.05,d:.2,s:.8},{w:"sawtooth",v:6,f:.1,d:.1,s:.3,g:1}],[{w:"sine",v:.3,a:.03,d:.2,s:.4},{w:"square",v:7,f:.2,d:1,s:.1,g:1}],[{w:"square",v:.2,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",a:.02,d:2},{w:"sine",v:6,t:2,d:.04,g:1}],[{w:"sine",v:.7,a:.03,d:.4,s:.4},{w:"sine",v:4,t:2,f:.2,d:.4,g:1}],[{w:"sine",v:.7,a:.02,d:.4,s:.6},{w:"sine",v:3,t:2,d:0,s:1,g:1}],[{w:"sine",v:.4,a:.06,d:.3,s:.3},{w:"sine",v:7,t:2,d:.2,s:.2,g:1}],[{w:"sine",a:.02,d:.3,s:.3},{w:"sawtooth",v:3,t:2,d:.3,g:1}],[{w:"sine",v:.4,a:.02,d:2,s:.1},{w:"sawtooth",v:8,t:2,f:1,d:.5,g:1}],[{w:"sine",v:.7,a:.03,d:.5,s:.3},{w:"sine",v:.003,t:0,f:4,d:.1,s:.002,g:1}],[{w:"sine",v:.7,a:.02,d:2},{w:"sine",v:1,t:2,f:1,d:.02,g:1}],[{w:"square",v:.3,d:1,s:.5},{w:"square",v:1,f:.2,d:1,s:.5,g:1}],[{w:"sawtooth",v:.3,d:2,s:.5},{w:"square",v:2,f:.1,s:.5,g:1}],[{w:"triangle",v:.5,a:.05,d:2,s:.6},{w:"sine",v:4,t:2,g:1}],[{w:"triangle",v:.3,a:.01,d:2,s:.3},{w:"sine",v:22,t:2,f:1,d:.03,s:.2,g:1}],[{w:"sawtooth",v:.3,d:1,s:.5},{w:"sine",v:11,t:11,a:.2,d:.05,s:.3,g:1}],[{w:"sine",v:.3,a:.06,d:1,s:.5},{w:"sine",v:7,f:1,d:1,s:.2,g:1}],[{w:"sawtooth",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sawtooth",v:.3,t:.75,d:.7,a:.1,s:.3,r:.2}],[{w:"triangle",v:.3,a:.01,d:.7,s:.5},{w:"square",v:5,t:.5,d:.7,s:.5,g:1}],[{w:"triangle",v:.3,a:.02,d:.3,s:.3,r:.3},{w:"square",v:3,t:4,f:1,a:.02,d:.1,s:1,g:1},{w:"triangle",v:.08,t:.5,a:.1,h:0,d:.1,s:.5,r:.1,b:0,c:0}],[{w:"sine",v:.3,a:.05,d:1,s:.7,r:.3},{w:"sine",v:2,f:1,d:.3,s:1,g:1}],[{w:"square",v:.3,a:.03,d:.5,s:.3,r:.1},{w:"square",v:4,f:1,a:.03,d:.1,g:1}],[{w:"triangle",v:.3,a:.08,d:1,s:.3,r:.1},{w:"square",v:2,f:1,d:.3,s:.3,g:1,t:4,a:.08}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sine",v:.1,t:2.001,f:1,d:1,s:50,g:1}],[{w:"triangle",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sine",v:12,t:7,f:1,d:.5,s:1.7,g:1}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sawtooth",v:22,t:6,d:.06,s:.3,g:1}],[{w:"triangle",v:.3,a:.05,d:11,r:.3},{w:"triangle",v:1,d:1,s:8,g:1}],[{w:"sawtooth",v:.3,d:4,s:.8,r:.1},{w:"square",v:1,t:2,f:8,a:1,d:1,s:1,r:.1,g:1}],[{w:"triangle",v:.3,d:1,s:.5,t:.8,a:.2,p:1.25,q:.2},{w:"sawtooth",v:.2,a:.2,d:.3,s:1,t:1.2,p:1.25,q:.2}],[{w:"sine",v:.3,d:1,s:.3},{w:"square",v:22,t:11,d:.5,s:.1,g:1}],[{w:"sawtooth",v:.3,a:.04,d:1,s:.8,r:.1},{w:"square",v:1,t:.5,d:1,s:2,g:1}],[{w:"triangle",v:.3,d:1,s:.3},{w:"sine",v:22,t:6,d:.6,s:.05,g:1}],[{w:"sine",v:.6,a:.1,d:.05,s:.4},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"sine",a:.1,d:.05,s:.4,v:.8},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"square",v:.3,a:.1,d:.1,s:.4},{w:"square",v:1,f:1,d:.3,s:.1,g:1}],[{w:"sawtooth",v:.3,d:.5,r:.5},{w:"sawtooth",v:11,t:5,d:.05,g:1}],[{w:"square",v:.3,d:.2,r:.2},{w:"square",v:7,t:3,d:.05,g:1}],[{w:"triangle",d:.2,r:.2},{w:"square",v:9,t:3,d:.1,r:.1,g:1}],[{w:"triangle",d:.3,r:.3},{w:"square",v:6,t:3,d:1,r:1,g:1}],[{w:"triangle",v:.4,d:.2,r:.2},{w:"square",v:22,t:12,d:.1,r:.1,g:1}],[{w:"sine",v:.25,a:.02,d:.05,s:.8},{w:"square",v:1,t:2,d:.03,s:11,g:1}],[{w:"sine",v:.3,a:.05,d:11},{w:"square",v:7,t:3,f:1,s:.7,g:1}],[{w:"square",v:.3,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",v:.4,d:.3,r:.3},{w:"sine",v:7,t:9,d:.1,r:.1,g:1}],[{w:"sine",v:.7,d:.1,r:.1},{w:"sine",v:22,t:7,d:.05,g:1}],[{w:"sine",v:.6,d:.15,r:.15},{w:"square",v:11,t:3.2,d:.1,r:.1,g:1}],[{w:"sine",v:.8,d:.07,r:.07},{w:"square",v:11,t:7,r:.01,g:1}],[{w:"triangle",v:.7,t:.5,d:.2,r:.2,p:.95},{w:"n0",v:9,g:1,d:.2,r:.2}],[{w:"sine",v:.7,d:.1,r:.1,p:.9},{w:"square",v:14,t:2,d:.005,r:.005,g:1}],[{w:"square",d:.15,r:.15,p:.5},{w:"square",v:4,t:5,d:.001,r:.001,g:1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"sine",t:12.5,d:0,r:0,p:.5,v:.3,h:.2,q:.5},{g:1,w:"sine",v:1,t:2,d:0,r:0,s:1},{g:1,w:"n0",v:.2,t:2,a:.6,h:0,d:.1,r:.1,b:0,c:0}],[{w:"n0",v:.2,a:.05,h:.02,d:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.1,d:1,s:.5},{w:"sine",v:4,t:0,f:1.5,d:1,s:1,r:.1,g:1},{g:1,w:"sine",v:4,t:0,f:2,a:.6,h:0,d:.1,s:1,r:.1,b:0,c:0}],[{w:"square",v:.3,t:.25,d:11,s:1},{w:"square",v:12,t:0,f:8,d:1,s:1,r:11,g:1}],[{w:"n0",v:.4,t:.5,a:1,d:11,s:1,r:.5},{w:"square",v:1,t:0,f:14,d:1,s:1,r:11,g:1}],[{w:"sine",t:0,f:1221,a:.2,d:1,r:.25,s:1},{g:1,w:"n0",v:3,t:.5,d:1,s:1,r:1}],[{w:"sine",d:.4,r:.4,p:.1,t:2.5,v:1},{w:"n0",v:12,t:2,d:1,r:1,g:1}],],program0:[[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sine",v:.5,d:.3,r:.3}],[{w:"triangle",v:.5,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"square",v:.2,d:1,r:1}],[{w:"sawtooth",v:.3,d:.7,r:.7}],[{w:"sine",v:.5,a:.01,s:1}],[{w:"sine",v:.7,d:.02,s:.7}],[{w:"square",v:.2,s:1}],[{w:"triangle",v:.5,a:.01,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.05,s:1}],[{w:"triangle",v:.5,d:.5}],[{w:"square",v:.2,d:.6}],[{w:"square",v:.2,d:.6}],[{w:"triangle",v:.8,d:.6}],[{w:"triangle",v:.4,d:.05}],[{w:"square",v:.2,d:1}],[{w:"square",v:.2,d:1}],[{w:"sine",v:.4,d:.6}],[{w:"triangle",v:.7,d:.4}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.1,s:.2}],[{w:"sawtooth",v:.4,d:.1,s:.2}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.3,d:.1}],[{w:"sawtooth",v:.3,d:.5,r:.5}],[{w:"triangle",v:.6,d:.1,r:.1,h:.03,p:.8}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"triangle",v:.3,a:.03,s:1}],[{w:"sine",v:.3,a:.03,s:1}],[{w:"triangle",v:.3,a:.05,s:1}],[{w:"sawtooth",v:.5,a:.01,d:.1}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.2,a:.05,d:.01,s:1}],[{w:"square",v:.3,a:.05,s:1}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.04,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.05,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"square",v:.3,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"triangle",v:.5,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"sawtooth",v:.4,d:12}],[{w:"sine",v:.4,a:.06,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.3,d:12}],[{w:"triangle",v:.5,d:12}],[{w:"square",v:.3,d:12}],[{w:"triangle",v:.5,a:.08,d:11}],[{w:"sawtooth",v:.5,a:.05,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.5,a:.04,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,a:.8,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.3,d:1,r:1}],[{w:"sawtooth",v:.5,d:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"square",v:.3,d:.2,r:.2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"sawtooth",v:.2,a:.02,d:.7}],[{w:"triangle",v:.5,d:1}],[{w:"sawtooth",v:.3,d:.3,r:.3}],[{w:"sine",v:.8,d:.1,r:.1}],[{w:"square",v:.2,d:.1,r:.1,p:1.05}],[{w:"sine",v:.8,d:.05,r:.05}],[{w:"triangle",v:.5,d:.1,r:.1,p:.96}],[{w:"triangle",v:.5,d:.1,r:.1,p:.97}],[{w:"square",v:.3,d:.1,r:.1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"triangle",v:.5,d:.03,t:0,f:1332,r:.001,p:1.1}],[{w:"n0",v:.2,t:.1,d:.02,a:.05,h:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.8,d:1,t:0,f:1832}],[{w:"triangle",d:.5,t:0,f:444,s:1}],[{w:"n0",v:.4,d:1,t:0,f:22,s:1}],[{w:"n0",v:.5,a:.2,d:11,t:0,f:44}],[{w:"n0",v:.5,t:.25,d:.4,r:.4}],],drummap1:[[{w:"triangle",t:0,f:70,v:1,d:.05,h:.03,p:.9,q:.1},{w:"n0",g:1,t:6,v:17,r:.01,h:0,p:0}],[{w:"triangle",t:0,f:88,v:1,d:.05,h:.03,p:.5,q:.1},{w:"n0",g:1,t:5,v:42,r:.01,h:0,p:0}],[{w:"n0",f:222,p:0,t:0,r:.01,h:0}],[{w:"triangle",v:.3,f:180,d:.05,t:0,h:.03,p:.9,q:.1},{w:"n0",v:.6,t:0,f:70,h:.02,r:.01,p:0},{g:1,w:"square",v:2,t:0,f:360,r:.01,b:0,c:0}],[{w:"square",f:1150,v:.34,t:0,r:.03,h:.025,d:.03},{g:1,w:"n0",t:0,f:13,h:.025,d:.1,s:1,r:.1,v:1}],[{w:"triangle",f:200,v:1,d:.06,t:0,r:.06},{w:"n0",g:1,t:0,f:400,v:12,r:.02,d:.02}],[{w:"triangle",f:100,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.4,h:.015,d:.005,r:.005}],[{w:"n1",f:390,v:.25,r:.01,t:0}],[{w:"triangle",f:120,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.5,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,r:.03,t:0,h:.005,d:.03}],[{w:"triangle",f:140,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,t:0,d:.2,r:.2},{w:"n0",v:.3,t:0,c:0,f:440,h:.005,d:.05}],[{w:"triangle",f:155,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"triangle",f:180,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],[{w:"triangle",f:220,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",f:500,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.1,t:0,r:.01,f:440}],[{w:"n1",v:.3,f:800,d:.2,r:.2,h:.05,t:0},{w:"square",t:0,v:1,d:.1,r:.1,p:.1,f:220,g:1}],[{w:"sine",f:1651,v:.15,d:.2,r:.2,h:0,t:0},{w:"sawtooth",g:1,t:1.21,v:7.2,d:.1,r:11,h:1},{g:1,w:"n0",v:3.1,t:.152,d:.002,r:.002}],null,[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],null,[{w:"n1",v:.3,f:555,d:.25,r:.25,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,f:440,a:.005,h:.02}],[{w:"sawtooth",f:776,v:.2,d:.3,t:0,r:.3},{g:1,w:"n0",v:2,t:0,f:776,a:.005,h:.02,d:.1,s:1,r:.1,c:0},{g:11,w:"sine",v:.1,t:0,f:22,d:.3,r:.3,b:0,c:0}],[{w:"n1",f:440,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.4,t:0,r:.01,f:440}],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[{w:"sine",f:1720,v:.3,d:.02,t:0,r:.02},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}],[{w:"sine",f:1720,v:.3,d:.25,t:0,r:.25},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}],],drummap0:[[{w:"triangle",t:0,f:110,v:1,d:.05,h:.02,p:.1}],[{w:"triangle",t:0,f:150,v:.8,d:.1,p:.1,h:.02,r:.01}],[{w:"n0",f:392,v:.5,d:.01,p:0,t:0,r:.05}],[{w:"n0",f:33,d:.05,t:0}],[{w:"n0",f:100,v:.7,d:.03,t:0,r:.03,h:.02}],[{w:"n0",f:44,v:.7,d:.02,p:.1,t:0,h:.02}],[{w:"triangle",f:240,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,r:.01,t:0}],[{w:"triangle",f:270,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.04,r:.04,t:0}],[{w:"triangle",f:300,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.1,r:.1,h:.02,t:0}],[{w:"triangle",f:320,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"triangle",f:360,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.1,h:.05,t:0,p:.1}],[{w:"triangle",f:400,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:440,v:.3,d:.1,p:.9,t:0,r:.1}],[{w:"n0",f:200,v:.2,d:.05,p:.9,t:0}],[{w:"n0",f:440,v:.3,d:.12,p:.9,t:0}],[{w:"sine",f:800,v:.4,d:.06,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:33,v:.3,d:.2,p:.9,t:0}],[{w:"n0",f:300,v:.3,d:.14,p:.9,t:0}],[{w:"sine",f:200,d:.06,t:0}],[{w:"sine",f:150,d:.06,t:0}],[{w:"sine",f:300,t:0}],[{w:"sine",f:300,d:.06,t:0}],[{w:"sine",f:250,d:.06,t:0}],[{w:"square",f:300,v:.3,d:.06,p:.8,t:0}],[{w:"square",f:260,v:.3,d:.06,p:.8,t:0}],[{w:"sine",f:850,v:.5,d:.07,t:0}],[{w:"sine",f:790,v:.5,d:.07,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"triangle",f:1800,v:.4,p:.9,t:0,h:.03}],[{w:"triangle",f:1800,v:.3,p:.9,t:0,h:.13}],[{w:"n0",f:330,v:.3,a:.02,t:0,r:.01}],[{w:"n0",f:330,v:.3,a:.02,t:0,h:.04,r:.01}],[{w:"n0",f:440,v:.3,t:0}],[{w:"sine",f:800,t:0}],[{w:"sine",f:700,t:0}],[{w:"n0",f:330,v:.3,t:0}],[{w:"n0",f:330,v:.3,t:0,h:.1,r:.01,p:.7}],[{w:"sine",t:0,f:1200,v:.3,r:.01}],[{w:"sine",t:0,f:1200,v:.3,d:.2,r:.2}],],ready:function(){var $;this.pg=[],this.vol=[],this.ex=[],this.bend=[],this.rpnidx=[],this.brange=[],this.sustain=[],this.notetab=[],this.rhythm=[],this.masterTuningC=0,this.masterTuningF=0,this.tuningC=[],this.tuningF=[],this.scaleTuning=[],this.maxTick=0,this.playTick=0,this.playing=0,this.releaseRatio=3.5;for(var $=0;$<16;++$)this.pg[$]=0,this.vol[$]=1.86000372000744,this.bend[$]=0,this.brange[$]=256,this.tuningC[$]=0,this.tuningF[$]=0,this.scaleTuning[$]=[0,0,0,0,0,0,0,0,0,0,0,0],this.rhythm[$]=0;this.rhythm[9]=1,this.preroll=.2,this.relcnt=0,setInterval((function(){if(++this.relcnt>=3){this.relcnt=0;for(var $=this.notetab.length-1;$>=0;--$){var t=this.notetab[$];this.actx.currentTime>t.e&&(this._pruneNote(t),this.notetab.splice($,1))}}if(this.playing&&this.song.ev.length>0)for(var s=this.song.ev[this.playIndex];this.actx.currentTime+this.preroll>this.playTime;)if(65361==s.m[0]?(this.song.tempo=s.m[1],this.tick2Time=240/this.song.tempo/this.song.timebase):this.send(s.m,this.playTime),++this.playIndex,this.playIndex>=this.song.ev.length){if(this.loop)s=this.song.ev[this.playIndex=0],this.playTick=s.t;else{this.playTick=this.maxTick,this.playing=0;break}}else s=this.song.ev[this.playIndex],this.playTime+=(s.t-this.playTick)*this.tick2Time,this.playTick=s.t}).bind(this),60),this.isReady=1},setMasterVol:function($){void 0!=$&&(this.masterVol=$),this.out&&(this.out.gain.value=this.masterVol)},setReverbLev:function($){void 0!=$&&(this.reverbLev=$);var t=parseFloat(this.reverbLev);this.rev&&!isNaN(t)&&(this.rev.gain.value=8*t)},setLoop:function($){this.loop=$},setVoices:function($){this.voices=$},reset:function(){for(var $=0;$<16;++$)this.setProgram($,0),this.setBendRange($,256),this.setModulation($,0),this.setChVol($,100),this.setPan($,64),this.resetAllControllers($),this.allSoundOff($),this.rhythm[$]=0,this.tuningC[$]=0,this.tuningF[$]=0,this.scaleTuning[$]=[0,0,0,0,0,0,0,0,0,0,0,0];this.masterTuningC=0,this.masterTuningF=0,this.rhythm[9]=1},setQuality:function($){var t;for(void 0!=$&&(this.quality=$),t=0;t<128;++t)this.setTimbre(0,t,this.program0[t]);for(t=0;t<this.drummap0.length;++t)this.setTimbre(1,t+35,this.drummap0[t]);if(this.quality){for(t=0;t<this.program1.length;++t)this.setTimbre(0,t,this.program1[t]);for(t=0;t<this.drummap.length;++t)this.drummap1[t]&&this.setTimbre(1,t+35,this.drummap1[t])}},setTimbre:function($,s,e){var _={g:0,w:"sine",t:1,f:0,v:.5,a:0,h:.01,d:.01,s:0,r:.05,p:1,q:1,k:0};function i($){for(s=0;s<$.length;++s)for(t in _)$[s].hasOwnProperty(t)&&void 0!==$[s][t]||($[s][t]=_[t]);return $}$&&s>=35&&s<=81&&(this.drummap[s-35]=i(e)),0==$&&s>=0&&s<=127&&(this.program[s]=i(e))},_pruneNote:function($){for(var t=$.o.length-1;t>=0;--t){if($.o[t].frequency?$.o[t].frequency.cancelScheduledValues(0):$.o[t].playbackRate.cancelScheduledValues(0),$.g[t].gain.cancelScheduledValues(0),$.o[t].stop(),$.o[t].detune)try{this.chmod[$.ch].disconnect($.o[t].detune)}catch(s){}$.g[t].gain.value=0}},_limitVoices:function($,t){this.notetab.sort(function($,t){return $.f!=t.f?$.f-t.f:$.e!=t.e?t.e-$.e:t.t-$.t});for(var s=this.notetab.length-1;s>=0;--s){var e=this.notetab[s];(this.actx.currentTime>e.e||s>=this.voices-1)&&(this._pruneNote(e),this.notetab.splice(s,1))}},_note:function($,t,s,e,_){var i,n,a,r=[],v=[],w=[],h=[],d=[],o=440*Math.pow(2,(s-69+this.masterTuningC+this.tuningC[t]+(this.masterTuningF+this.tuningF[t]/8192+this.scaleTuning[t][s%12]))/12);this._limitVoices(t,s);for(var u=0;u<_.length;++u){var g=$+(a=_[u]).a+a.h;(0==a.g?(i=this.chvol[t],n=e*e/16384,h[u]=o*a.t+a.f):a.g>10?(i=v[a.g-11].gain,n=1,h[u]=h[a.g-11]*a.t+a.f):r[a.g-1].frequency?(i=r[a.g-1].frequency,n=h[a.g-1],h[u]=h[a.g-1]*a.t+a.f):(i=r[a.g-1].playbackRate,n=h[a.g-1]/440,h[u]=h[a.g-1]*a.t+a.f),"n"===a.w[0])?(r[u]=this.actx.createBufferSource(),r[u].buffer=this.noiseBuf[a.w],r[u].loop=!0,r[u].playbackRate.value=h[u]/440,1!=a.p&&this._setParamTarget(r[u].playbackRate,h[u]/440*a.p,$,a.q),r[u].detune&&(this.chmod[t].connect(r[u].detune),r[u].detune.value=this.bend[t])):(r[u]=this.actx.createOscillator(),r[u].frequency.value=h[u],1!=a.p&&this._setParamTarget(r[u].frequency,h[u]*a.p,$,a.q),"w"==a.w[0]?r[u].setPeriodicWave(this.wave[a.w]):r[u].type=a.w,r[u].detune&&(this.chmod[t].connect(r[u].detune),r[u].detune.value=this.bend[t])),v[u]=this.actx.createGain(),d[u]=a.r,r[u].connect(v[u]),v[u].connect(i),w[u]=n*a.v,a.k&&(w[u]*=Math.pow(2,(s-60)/12*a.k)),a.a?(v[u].gain.value=0,v[u].gain.setValueAtTime(0,$),v[u].gain.linearRampToValueAtTime(w[u],$+a.a)):v[u].gain.setValueAtTime(w[u],$),this._setParamTarget(v[u].gain,a.s*w[u],g,a.d),r[u].start($),this.rhythm[t]&&(r[u].onended=function($,t){return function(){t&&$.disconnect(t)}}(this.chmod[t],r[u].detune),r[u].stop($+_[0].d*this.releaseRatio))}this.rhythm[t]||this.notetab.push({t:$,e:99999,ch:t,n:s,o:r,g:v,t2:$+a.a,v:w,r:d,f:0})},_setParamTarget:function($,t,s,e){0!=e?$.setTargetAtTime(t,s,e):$.setValueAtTime(t,s)},_releaseNote:function($,t){if(9!=$.ch)for(var s=$.g.length-1;s>=0;--s)$.g[s].gain.cancelScheduledValues(t),t==$.t2?$.g[s].gain.setValueAtTime($.v[s],t):t<$.t2&&$.g[s].gain.setValueAtTime($.v[s]*(t-$.t)/($.t2-$.t),t),this._setParamTarget($.g[s].gain,0,t,$.r[s]);$.e=t+$.r[0]*this.releaseRatio,$.f=1},setModulation:function($,t,s){this.chmod[$].gain.setValueAtTime(100*t/127,this._tsConv(s))},setChVol:function($,t,s){this.vol[$]=3*t*t/16129,this.chvol[$].gain.setValueAtTime(this.vol[$]*this.ex[$],this._tsConv(s))},setPan:function($,t,s){this.chpan[$]&&this.chpan[$].pan.setValueAtTime((t-64)/64,this._tsConv(s))},setExpression:function($,t,s){this.ex[$]=t*t/16129,this.chvol[$].gain.setValueAtTime(this.vol[$]*this.ex[$],this._tsConv(s))},setSustain:function($,t,s){if(this.sustain[$]=t,s=this._tsConv(s),t<64)for(var e=this.notetab.length-1;e>=0;--e){var _=this.notetab[e];s>=_.t&&_.ch==$&&1==_.f&&this._releaseNote(_,s)}},allSoundOff:function($){for(var t=this.notetab.length-1;t>=0;--t){var s=this.notetab[t];s.ch==$&&(this._pruneNote(s),this.notetab.splice(t,1))}},resetAllControllers:function($){this.bend[$]=0,this.ex[$]=1,this.rpnidx[$]=16383,this.sustain[$]=0,this.chvol[$]&&(this.chvol[$].gain.value=this.vol[$]*this.ex[$],this.chmod[$].gain.value=0)},setBendRange:function($,t){this.brange[$]=t},setProgram:function($,t){this.debug&&console.log("Pg("+$+")="+t),this.pg[$]=t},setBend:function($,t,s){s=this._tsConv(s);var e=100*this.brange[$]/127;this.bend[$]=(t-8192)*e/8192;for(var _=this.notetab.length-1;_>=0;--_){var i=this.notetab[_];if(i.ch==$)for(var n=i.o.length-1;n>=0;--n)i.o[n].frequency&&i.o[n].detune&&i.o[n].detune.setValueAtTime(this.bend[$],s)}},noteOn:function($,t,s,e){if(0==s){this.noteOff($,t,e);return}if(e=this._tsConv(e),this.rhythm[$]){t>=35&&t<=81&&this._note(e,$,t,s,this.drummap[t-35]);return}this._note(e,$,t,s,this.program[this.pg[$]])},noteOff:function($,t,s){if(!this.rhythm[$]){s=this._tsConv(s);for(var e=this.notetab.length-1;e>=0;--e){var _=this.notetab[e];s>=_.t&&_.ch==$&&_.n==t&&0==_.f&&(_.f=1,this.sustain[$]<64&&this._releaseNote(_,s))}}},_tsConv:function($){return void 0==$||$<=0?($=0,this.actx&&($=this.actx.currentTime)):this.tsmode&&($=.001*$-this.tsdiff),$},setTsMode:function($){this.tsmode=$},send:function($,t){var s=15&$[0],e=-16&$[0];if(!(e<128)&&!(e>=256))switch("suspended"==this.audioContext.state&&this.audioContext.resume(),e){case 176:switch($[1]){case 1:this.setModulation(s,$[2],t);break;case 7:this.setChVol(s,$[2],t);break;case 10:this.setPan(s,$[2],t);break;case 11:this.setExpression(s,$[2],t);break;case 64:this.setSustain(s,$[2],t);break;case 98:case 99:this.rpnidx[s]=16383;break;case 100:this.rpnidx[s]=16256&this.rpnidx[s]|$[2];break;case 101:this.rpnidx[s]=127&this.rpnidx[s]|$[2]<<7;break;case 6:switch(this.rpnidx[s]){case 0:this.brange[s]=($[2]<<7)+(127&this.brange[s]);break;case 1:this.tuningF[s]=($[2]<<7)+(this.tuningF[s]+8192&127)-8192;break;case 2:this.tuningC[s]=$[2]-64}break;case 38:switch(this.rpnidx[s]){case 0:this.brange[s]=16256&this.brange[s]|$[2];break;case 1:this.tuningF[s]=(this.tuningF[s]+8192&16256|$[2])-8192}break;case 120:case 123:case 124:case 125:case 126:case 127:this.allSoundOff(s);break;case 121:this.resetAllControllers(s)}break;case 192:this.setProgram(s,$[1]);break;case 224:this.setBend(s,$[1]+($[2]<<7),t);break;case 144:this.noteOn(s,$[1],$[2],t);break;case 128:this.noteOff(s,$[1],t);break;case 240:if(255==$[0]){this.reset();break}if(254!=$[0]&&this.debug)for(var _=[],i=0;i<$.length;++i)_.push($[i].toString(16));if(240==$[0]&&(127==$[1]&&4==$[3]&&(3==$[4]&&$.length>=8&&(this.masterTuningF=(128*$[6]+$[5]-8192)/8192),4==$[4]&&$.length>=8&&(this.masterTuningC=$[6]-64)),65==$[1]&&66==$[3]&&18==$[4]&&64==$[5])){if((240&$[6])==16&&11==$.length){var n=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][15&$[6]];21==$[7]?this.rhythm[n]=$[8]:$[7]>=64&&$[7]<=75&&(this.scaleTuning[n][$[7]-64]=($[8]-64)/100)}else 0==$[6]&&(0==$[7]&&14==$.length?this.masterTuningF=(4096*$[8]+256*$[9]+16*$[10]+$[11]-1024)/1e3:5==$[7]&&11==$.length&&(this.masterTuningC=$[8]-64))}}},_createWave:function($){for(var t=new Float32Array($.length),s=new Float32Array($.length),e=1;e<$.length;++e)t[e]=$[e];return this.actx.createPeriodicWave(s,t)},getAudioContext:function(){return this.actx},setAudioContext:function($,t){this.audioContext=this.actx=$,this.dest=t,t||(this.dest=$.destination),this.tsdiff=.001*performance.now()-this.actx.currentTime,this.out=this.actx.createGain(),this.comp=this.actx.createDynamicsCompressor();var s=.5*this.actx.sampleRate|0;this.convBuf=this.actx.createBuffer(2,s,this.actx.sampleRate),this.noiseBuf={},this.noiseBuf.n0=this.actx.createBuffer(1,s,this.actx.sampleRate),this.noiseBuf.n1=this.actx.createBuffer(1,s,this.actx.sampleRate);for(var e=this.convBuf.getChannelData(0),_=this.convBuf.getChannelData(1),i=this.noiseBuf.n0.getChannelData(0),n=this.noiseBuf.n1.getChannelData(0),a=0;a<s;++a)a/s<Math.random()&&(e[a]=Math.exp(-3*a/s)*(Math.random()-.5)*.5,_[a]=Math.exp(-3*a/s)*(Math.random()-.5)*.5),i[a]=2*Math.random()-1;for(var r=0;r<64;++r){var v=10*Math.random()+1,w=10*Math.random()+1;for(a=0;a<s;++a){var h=Math.sin(a/s*2*Math.PI*440*v)*Math.sin(a/s*2*Math.PI*440*w);n[a]+=h/8}}for(this.useReverb&&(this.conv=this.actx.createConvolver(),this.conv.buffer=this.convBuf,this.rev=this.actx.createGain(),this.rev.gain.value=this.reverbLev,this.out.connect(this.conv),this.conv.connect(this.rev),this.rev.connect(this.comp)),this.setMasterVol(),this.out.connect(this.comp),this.comp.connect(this.dest),this.chvol=[],this.chmod=[],this.chpan=[],this.wave={w9999:this._createWave("w9999")},this.lfo=this.actx.createOscillator(),this.lfo.frequency.value=5,this.lfo.start(0),a=0;a<16;++a)this.chvol[a]=this.actx.createGain(),this.actx.createStereoPanner?(this.chpan[a]=this.actx.createStereoPanner(),this.chvol[a].connect(this.chpan[a]),this.chpan[a].connect(this.out)):(this.chpan[a]=null,this.chvol[a].connect(this.out)),this.chmod[a]=this.actx.createGain(),this.lfo.connect(this.chmod[a]),this.pg[a]=0,this.resetAllControllers(a);this.setReverbLev(),this.reset()}},this.sy.properties)this[t]=this.sy.properties[t].value;this.setQuality(1),$&&(void 0!=$.useReverb&&(this.useReverb=$.useReverb),void 0!=$.quality&&this.setQuality($.quality),void 0!=$.voices&&this.setVoices($.voices)),this.ready()}function a($,t,s){if(void 0===t)return a($,[],[]);if($ instanceof Object){for(var e,_=0;_<t.length;_++)if(t[_]===$)return s[_];for(var i in e=$ instanceof Array?[]:{},t.push($),s.push(e),$)$.hasOwnProperty(i)&&(e[i]=a($[i],t,s));return e}return $}function r(){return t||(t=$.lib.getAudioContext()),!!t}});